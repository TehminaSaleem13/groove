<div class="store-modal">
  <div class="modal-header">
    <button type="button" class="close-btn" ng-click="ok()"><i class="glyphicon glyphicon-remove"></i></button>
    <div class="modal-title">
      <span ng-show="edit_status">Currently Updating {{stores.single.name}}</span>
      <span ng-hide="edit_status">Create Store</span>
    </div>
  </div>
  <div class="modal-body">
    <div class="container-fluid form-horizontal">
      <div class="row">
        <div class="col-md-8">
          <legend>Store Information</legend>
          <div class="form-group">
            <label class="control-label col-md-3">Store Name</label>

            <div class="controls col-md-9">
              <input name="name" ng-model="stores.single.name" ng-blur="update_single_store(true)" type="text"
                     class="form-control input-style" value="" required/>
            </div>
          </div>

          <div class="form-group">
            <label class="control-label col-md-3">Active</label>

            <div class="controls col-md-2">
              <div toggle-switch ng-model="stores.single.status" groov-click="update_single_store(true)"></div>
            </div>
            <div class="col-sm-2" ng-if="stores.single.store_type=='Shopify' || stores.single.store_type=='BigCommerce' || stores.single.store_type=='Magento API 2'">
              <button ng-click="import_product_catalog()" class="groove-button label label-default label-danger" translate>Import Product Catalog
              </button>
            </div>
            
            <div class="col-sm-2" ng-if="stores.single.store_type=='Teapplix'">
              <button ng-click="import_product_catalog()" class="groove-button label label-default label-danger" translate>Import/Update Product Catalog
              </button>
            </div>

            <div class="col-sm-2" ng-if="stores.single.store_type=='Amazon'">
              <button ng-click="import_product_catalog()" class="groove-button label label-default label-danger" translate>Import Product Catalog
              </button>
            </div>

          </div>
          <div ng-if="stores.single.store_type=='Amazon'">
            <div class="form-group">
              <label class="control-label col-md-3"></label>
              <div  class="col-sm-4">
                <input name="productfile" file-upload type="file" value="" required style="width: 220px;" />
              </div>
              <div class="col-sm-2">
                  <button class="modal-save-button" ng-click="amazon_products_import()">Import Poducts</button> 
              </div>
            </div>
            <div class="form-group">
              <label class="control-label col-md-3"></label>
              <div class="col-md-9">
                <small>( Please upload only unmodified txt file. )</small>
              </div>
            </div>
          </div>
          
          <div class="form-group" ng-if="stores.general_settings.email_address_for_packer_notes==null || stores.general_settings.email_address_for_packer_notes=='null' || stores.general_settings.email_address_for_packer_notes.length<1">
            <label class="control-label col-md-3">Note*</label>
            <div class="col-md-9">
              To receive an email notification when the import completes, please add an address for 'system notifications' in general settings.</a>
            </div>
          </div>

          <div ng-if="stores.single.store_type=='BigCommerce' && stores.single.allow_bc_inv_push">
            <div class="form-group">
              <label class="control-label col-md-3">Inventory Push/Pull</label>

              <div class="controls col-md-2">
                <div toggle-switch ng-model="stores.single.update_inv" groov-click="update_single_store(true)"></div>
              </div>
            </div>

            <div class="form-group" ng-show="stores.single.update_inv && stores.single.id && stores.single.store_hash && stores.single.access_token">
              <label class="control-label col-md-3"></label>

              <div class="col-sm-2">
                <button confirm-click="Are you sure? This will overwrite inventory data!" ng-click="pull_store_inventory()" class="dropdown-toggle groove-button label label-default label-danger" translate>Pull Inventory
                </button>
              </div>
              <div class="col-sm-2">
                <button confirm-click="Are you sure? This will overwrite inventory data!" ng-click="push_store_inventory()" class="dropdown-toggle groove-button label label-default label-danger" translate>Push Inventory
                </button>
              </div>
            </div>
          </div>

          <div class="form-group">
            <label class="control-label col-md-3"></label>

            <div class="col-sm-9" ng-show="stores.single.update_inv && !stores.single.id">
              'Push Inventory' and 'Pull Inventory' buttons will be provided once the store is created.
            </div>
            <div class="col-sm-9">
              <span style="color:RED;">{{stores.single.connection_message}}</span>
            </div>
          </div>
          <div class="form-group">
            <label class="control-label col-md-3">Warehouse Location </label>

            <div class="controls col-md-9" dropdown>
              <button class="dropdown-toggle groove-button">
                <span ng-repeat="inv_wh in warehouses.list"
                      ng-show="stores.single.inventory_warehouse_id==inv_wh.info.id">{{inv_wh.info.name}}</span>
                <span class="caret"></span>
              </button>
              <ul class="dropdown-menu" role="menu">
                <li ng-repeat="inv_wh in warehouses.list"><a class="dropdown-toggle"
                                                             ng-click="change_opt('inventory_warehouse_id',inv_wh.info.id)">{{inv_wh.info.name}}</a>
                </li>
              </ul>
            </div>
          </div>

          <div class="form-group">
            <label class="control-label col-md-3">Custom Packing-Slip Message For Customer</label>

            <div class="controls col-md-9">
              <div ng-controller="storeSingleCtrl">
                <div text-angular ng-model="stores.single.thank_you_message_to_customer" ng-blur="update_single_store(true)"></div>
              </div>
            </div>
          </div>

          <div class="form-group">
            <label class="control-label col-md-3">Store Type</label>

            <div class="controls col-md-9" dropdown>
              <button class="dropdown-toggle groove-button">
                <span ng-repeat="(id ,store) in stores.types"
                      ng-show="stores.single.store_type==id">{{store.name}}</span>
                <span class="caret"></span>
              </button>
              <ul class="dropdown-menu" role="menu">
                <li ng-repeat="(id ,store) in stores.types">
                  <!-- <a class="dropdown-toggle" ng-if="hide_if_mg_rest(store.name)" ng-click="change_opt('store_type',id)">{{store.name}}</a> -->
                  <a class="dropdown-toggle" ng-click="change_opt('store_type',id)">{{store.name}}</a>

                </li>
              </ul>
            </div>
          </div>
        </div>
      </div>
      <div ng-repeat="(id, store_type) in stores.types" groov-include="{{store_type.file}}"
           ng-show="stores.single.store_type == id"></div>

    </div>
  </div>

  <div class="modal-footer">
    <button ng-click="ok()" class="modal-save-button" translate>modal.save_close</button>
    <button ng-click="cancel()" class="modal-cancel-button" translate>modal.cancel</button>
  </div>
</div>
