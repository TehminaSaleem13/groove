<div class="row navigation-row">
    <div ng-include="'/assets/partials/navigation.html'"></div>
</div>

<div  class="row home-row">
    <div class="alert alert-danger" ng-show="show_error">
        <i class="icon icon-remove close pull-right" ng-click="show_error = false"></i>
        <p>{{error_msg}}</p>
    </div>
</div>

<div class="row home-row">
    <div class="span3 left-menu">
        <div class="accordion" id="accordion2">
            <div class="accordion-group">
                <div class="accordion-heading">
                    <a class="accordion-toggle" data-toggle="collapse" data-parent="#accordion2" href="#collapseOne">
                        Orders
                    </a>
                </div>
                <div id="collapseOne" class="accordion-body collapse in">
                    <div class="accordion-inner">
                        <ul class="nav nav-pills nav-stacked">
                            <li class="order_setup-filter order_setup-filter-all" ><a href="" ng-click="order_setup_opt('filter','all')">Show All</a></li>
                            <li class="order_setup-filter order_setup-filter-awaiting" ><a href="" ng-click="order_setup_opt('filter','awaiting')">Awaiting</a></li>
                            <li class="order_setup-filter order_setup-filter-onhold"><a href="" ng-click="order_setup_opt('filter','onhold')">On Hold</a></li>
                            <li class="order_setup-filter order_setup-filter-cancelled"><a href="" ng-click="order_setup_opt('filter','cancelled')">Cancelled</a></li>
                            <li class="order_setup-filter order_setup-filter-scanned"><a href="" ng-click="order_setup_opt('filter','scanned')">Scanned</a></li>
                        </ul>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <div class="span8">
        <div class="well">
            <div class="row-fluid">
                <div class="span8">
                    <form class="form-search">
                        <input type="text" id="order-search-query" ng-model="order_setup.search" class="input-large search-query" placeholder="Search">
                    </form>
                </div>
                <div class="span4">
                    <ul class="nav nav-pills">
                        <li class="dropdown">
                            <a class="dropdown-toggle" id="drop4" role="button" data-toggle="dropdown" href="#">Edit <b class="caret"></b></a>
                            <ul id="menu2" class="dropdown-menu" role="menu" aria-labelledby="drop4">
                                <li role="presentation"><a role="menuitem" tabindex="-1" ng-click="order_delete()">Delete</a></li>
                                <li role="presentation"><a role="menuitem" tabindex="-1" ng-click="order_duplicate()">Duplicate</a></li>
                            </ul>
                        </li>
                        <li class="dropdown">
                            <a class="dropdown-toggle" id="drop5" role="button" data-toggle="dropdown" href="#">Change Status
                                <b class="caret"></b></a>
                            <ul id="menu1" class="dropdown-menu" role="menu" aria-labelledby="drop5">
                                <li role="presentation"><a role="menuitem" tabindex="-1" ng-click="order_change_status('awaiting')">Awaiting</a></li>
                                <li role="presentation"><a role="menuitem" tabindex="-1" ng-click="order_change_status('onhold')">On Hold</a></li>
                                <li role="presentation"><a role="menuitem" tabindex="-1" ng-click="order_change_status('cancelled')">Cancelled</a></li>
                                <li role="presentation"><a role="menuitem" tabindex="-1" ng-click="order_change_status('scanned')">Scanned</a></li>
                            </ul>
                        </li>
                    </ul>
                </div>
            </div>
            <table id="orderstbl" class="table table-hover table-bordered" infinite-scroll="order_next()">
                <thead>
                <tr>
                    <th class="span1" data-header="checkbox">
                        <input ng-model="order_setup.select_all" type="checkbox" ng-change='select_all_toggle()' />
                    </th>
                    <th class="span1 order_setup-sort" data-header="tags">
                        Tags
                    </th>
                    <th class="order_setup-sort order_setup-sort-store span1" data-header="store_name">
                        <a href="" ng-click="order_setup_opt('sort','store')">Store<span class="{{'caret-'+order_setup.order}}"></span></a>
                    </th>
                    <th class="order_setup-sort order_setup-sort-notes span1" data-header="notes">
                        <a href="" ng-click="order_setup_opt('sort','notes')">Notes<span class="{{'caret-'+order_setup.order}}"></span></a>
                    </th>
                    <th class="order_setup-sort order_setup-sort-store_order_id span2" data-header="ordernum">
                        <a href="" ng-click="order_setup_opt('sort','store_order_id')">Order #<span class="{{'caret-'+order_setup.order}}"></span></a>
                    </th>
                    <th class="order_setup-sort order_setup-sort-order_date span2" data-header="orderdate">
                        <a href="" ng-click="order_setup_opt('sort','order_date')">Order Date<span class="{{'caret-'+order_setup.order}}"></span></a>
                    </th>
                    <th class="order_setup-sort order_setup-sort-items span1" data-header="itemslength">
                        <a href="" ng-click="order_setup_opt('sort','items')">Items<span class="{{'caret-'+order_setup.order}}"></span></a>
                    </th>
                    <th class="order_setup-sort order_setup-sort-recipient span2" data-header="recipient">
                        <a href="" ng-click="order_setup_opt('sort','recipient')">Recipient<span class="{{'caret-'+order_setup.order}}"></span></a>
                    </th>
                    <th class="order_setup-sort order_setup-sort-status span1" data-header="status">
                        <a href="" ng-click="order_setup_opt('sort','status')">Status<span class="{{'caret-'+order_setup.order}}"></span></a>
                    </th>
                    <th class="order_setup-sort order_setup-sort-email span2" data-header="email">
                        <a href="" ng-click="order_setup_opt('sort','email')">Email<span class="{{'caret-'+order_setup.order}}"></span></a>
                    </th>
                    <th class="order_setup-sort order_setup-sort-tracking_num span2" data-header="tracking_num">
                        <a href="" ng-click="order_setup_opt('sort','tracking_num')">Tracking Id<span class="{{'caret-'+order_setup.order}}"></span></a>
                    </th>
                    <th class="order_setup-sort order_setup-sort-city span2" data-header="city">
                        <a href="" ng-click="order_setup_opt('sort','city')">City<span class="{{'caret-'+order_setup.order}}"></span></a>
                    </th>
                    <th class="order_setup-sort order_setup-sort-state span1" data-header="state">
                        <a href="" ng-click="order_setup_opt('sort','state')">State<span class="{{'caret-'+order_setup.order}}"></span></a>
                    </th>
                    <th class="order_setup-sort order_setup-sort-postcode span2" data-header="postcode">
                        <a href="" ng-click="order_setup_opt('sort','postcode')">Zip<span class="{{'caret-'+order_setup.order}}"></span></a>
                    </th>
                    <th class="order_setup-sort order_setup-sort-country span3" data-header="country">
                        <a href="" ng-click="order_setup_opt('sort','country')">Country<span class="{{'caret-'+order_setup.order}}"></span></a>
                    </th>
                </tr>
                </thead>
                <tbody>
                <tr ng-repeat="order in orders">
                    <td data-header="checkbox"><input type="checkbox" ng-model="order.checked"/></td>
                    <td data-header="tags">
                        <span ng-repeat = "tag in order.tags">
                            <div class="tagbox" ng-style="{background: tag.color}">
                            </div>
                        </span>
                    </td>
                    <td data-header="store_name">
                        {{order.store_name}}
                    </td>
                    <td data-header="notes" id="{{'orders_notes_'+$index}}" ng-dblclick="edit_single_node($index,order.id,'notes')">
                        {{order.notes}}
                        <div id="{{'orders_notes_input_'+$index}}" ng-show="orders_edit_tmp.editing == $index && orders_edit_tmp.editing_var == 'notes'" class="tag-bubble tag-bubble-input span2 input-text">
                            <input xs-input-sync class="span2" name="{{'orders_notes_'+$index}}" ng-model="orders_edit_tmp.notes" type="text" placeholder="Edit..." />
                            <i ng-show="orders_edit_tmp.editing != -1" class="icon-ok" ng-click="save_single_node()"></i>
                        </div>
                    </td>
                    <td data-header="ordernum" id="{{'orders_ordernum_'+$index}}" ng-dblclick="edit_single_node($index,order.id,'ordernum')">
                        <a href="#showOrder" role="button" data-toggle="modal" ng-click="order_single_details(order.id,$index)" class="ng-binding">{{order.ordernum}}</a>
                        <div id="{{'orders_ordernum_input_'+$index}}" ng-show="orders_edit_tmp.editing == $index && orders_edit_tmp.editing_var == 'ordernum'" class="tag-bubble tag-bubble-input span2 input-text">
                            <input xs-input-sync class="span2" name="{{'orders_ordernum_'+$index}}" ng-model="orders_edit_tmp.ordernum" type="text" placeholder="Edit..." />
                            <i ng-show="orders_edit_tmp.editing != -1 && orders_edit_tmp.ordernum != ''" class="icon-ok" ng-click="save_single_node()"></i>
                        </div>
                    </td>
                    <td data-header="orderdate" id="{{'orders_orderdate_'+$index}}" ng-dblclick="edit_single_node($index,order.id,'orderdate')">
                        {{order.orderdate | date:'EEEE MM/dd/yyyy hh:mm:ss a'}}
                        <div id="{{'orders_orderdate_input_'+$index}}" ng-show="orders_edit_tmp.editing == $index && orders_edit_tmp.editing_var == 'orderdate'" class="tag-bubble tag-bubble-input span2 input-text">
                            <input xs-input-sync class="span2" name="{{'orders_orderdate_'+$index}}" ng-model="orders_edit_tmp.orderdate" type="text" placeholder="Edit..." />
                            <i ng-show="orders_edit_tmp.editing != -1" class="icon-ok" ng-click="save_single_node()"></i>
                        </div>
                    </td>
                    <td data-header="itemslength">
                        {{order.itemslength}}
                    </td>
                    <td data-header="recipient" id="{{'orders_recipient_'+$index}}" ng-dblclick="edit_single_node($index,order.id,'recipient')">
                        {{order.recipient}}
                        <div id="{{'orders_recipient_input_'+$index}}" ng-show="orders_edit_tmp.editing == $index && orders_edit_tmp.editing_var == 'recipient'" class="tag-bubble tag-bubble-input span2 input-text">
                            <input xs-input-sync class="span2" name="{{'orders_recipient_'+$index}}" ng-model="orders_edit_tmp.recipient" type="text" placeholder="Edit..." />
                            <i ng-show="orders_edit_tmp.editing != -1" class="icon-ok" ng-click="save_single_node()"></i>
                        </div>
                    </td>
                    <td data-header="status" id="{{'orders_status_'+$index}}" ng-dblclick="edit_single_node($index,order.id,'status')">
                        {{order.status}}
                        <div id="{{'orders_status_input_'+$index}}" ng-show="orders_edit_tmp.editing == $index && orders_edit_tmp.editing_var == 'status' " class="input-text">
                            <select class="span2" name="{{'orders_status_'+$index}}" ng-model="orders_edit_tmp.status" ng-click="save_single_node()">
                                <option value="awaiting">Awaiting</option>
                                <option value="onhold" >On Hold</option>
                                <option value="cancelled">Cancelled</option>
                                <option value="scanned">Scanned</option>
                            </select>
                        </div>
                    </td>
                    <td data-header="email" id="{{'orders_email_'+$index}}" ng-dblclick="edit_single_node($index,order.id,'email')">
                        {{order.email}}
                        <div id="{{'orders_email_input_'+$index}}" ng-show="orders_edit_tmp.editing == $index && orders_edit_tmp.editing_var == 'email'" class="tag-bubble tag-bubble-input span2 input-text">
                            <input xs-input-sync class="span2" name="{{'orders_email_'+$index}}" ng-model="orders_edit_tmp.email" type="text" placeholder="Edit..." />
                            <i class="icon-ok" ng-click="save_single_node()"></i>
                        </div>
                    </td>
                    <td data-header="tracking_num" id="{{'orders_tracking_num_'+$index}}" ng-dblclick="edit_single_node($index,order.id,'tracking_num')">
                        {{order.tracking_num}}
                        <div id="{{'orders_tracking_num_input_'+$index}}" ng-show="orders_edit_tmp.editing == $index && orders_edit_tmp.editing_var == 'tracking_num'" class="tag-bubble tag-bubble-input span2 input-text">
                            <input xs-input-sync class="span2" name="{{'orders_tracking_num_'+$index}}" ng-model="orders_edit_tmp.tracking_num" type="text" placeholder="Edit..." />
                            <i class="icon-ok" ng-click="save_single_node()"></i>
                        </div>
                    </td>
                    <td data-header="city" id="{{'orders_city_'+$index}}" ng-dblclick="edit_single_node($index,order.id,'city')">
                        {{order.city}}
                        <div id="{{'orders_city_input_'+$index}}" ng-show="orders_edit_tmp.editing == $index && orders_edit_tmp.editing_var == 'city'" class="tag-bubble tag-bubble-input span2 input-text">
                            <input xs-input-sync class="span2" name="{{'orders_city_'+$index}}" ng-model="orders_edit_tmp.city" type="text" placeholder="Edit..." />
                            <i class="icon-ok" ng-click="save_single_node()"></i>
                        </div>
                    </td>
                    <td data-header="state" id="{{'orders_state_'+$index}}" ng-dblclick="edit_single_node($index,order.id,'state')">
                        {{order.state}}
                        <div id="{{'orders_state_input_'+$index}}" ng-show="orders_edit_tmp.editing == $index && orders_edit_tmp.editing_var == 'state'" class="tag-bubble tag-bubble-input span3 input-text">
                            <input xs-input-sync class="span3" name="{{'orders_state_'+$index}}" ng-model="orders_edit_tmp.state" type="text" placeholder="Edit..." />
                            <i class="icon-ok" ng-click="save_single_node()"></i>
                        </div>
                    </td>
                    <td data-header="postcode" id="{{'orders_postcode_'+$index}}" ng-dblclick="edit_single_node($index,order.id,'postcode')">
                        {{order.postcode}}
                        <div id="{{'orders_postcode_input_'+$index}}" ng-show="orders_edit_tmp.editing == $index && orders_edit_tmp.editing_var == 'postcode'" class="tag-bubble tag-bubble-input span3 input-text">
                            <input xs-input-sync class="span3" name="{{'orders_postcode_'+$index}}" ng-model="orders_edit_tmp.postcode" type="text" placeholder="Edit..." />
                            <i class="icon-ok" ng-click="save_single_node()"></i>
                        </div>
                    </td>
                    <td data-header="country" id="{{'orders_country_'+$index}}" ng-dblclick="edit_single_node($index,order.id,'country')">
                        {{order.country}}
                        <div id="{{'orders_country_input_'+$index}}" ng-show="orders_edit_tmp.editing == $index && orders_edit_tmp.editing_var == 'country'" class="tag-bubble tag-bubble-input span3 input-text">
                            <input xs-input-sync class="span3" name="{{'orders_country_'+$index}}" ng-model="orders_edit_tmp.country" type="text" placeholder="Edit..." />
                            <i class="icon-ok" ng-click="save_single_node()"></i>
                        </div>
                    </td>
                </tr>
                </tbody>
            </table>

        </div>
        <!-- show order modal -->
        <div id="showOrder" class="modal hide fade" tabindex="-1" role="dialog" aria-labelledby="showOrder"
             aria-hidden="true">

            <div class="modal-header">
                <button type="button" class="close" data-dismiss="modal" aria-hidden="true"><i class="icon-remove"></i></button>
                <h3 id="showOrder-header">Order #{{single_order.basicinfo.increment_id}} Details</h3>
            </div>


            <div class="form-horizontal form-horizontal-create" >
            <fieldset>
                <div class="modal-body" id="showOrder-body">
                    <ul class="nav nav-tabs" id="myTab">
                        <li class="active"><a href="#infotab" data-toggle="tab">Information</a></li>
                        <li><a href="#itemstab" data-toggle="tab">Items</a></li>
                        <li><a href="#notestab" data-toggle="tab">Notes</a></li>
                        <li><a href="#actexceptab" data-toggle="tab">Activity & exceptions</a></li>
                    </ul>


                    <div class="tab-content">
                        <div class="alert alert-danger" ng-show="show_error_msgs">
                            <button type="button" class="close" data-dismiss="alert"><i class="icon-remove"></i></button>
                            <span ng-repeat="message in error_msgs">{{message}}</span>
                        </div>
                        <div class="tab-pane active" id="infotab">
                            <fieldset>
                                <legend>Product Details</legend>
                            <div class="row-fluid">
                                <div class="span6">
                                    <div class="control-group">
                                        <label class="control-label">First Name</label>
                                        <div class="controls">
                                            <input xs-input-sync type="text" ng-model="single_order.basicinfo.firstname" class="regular-input" />
                                        </div>
                                    </div>
                                    <div class="control-group">
                                        <label class="control-label">Last Name</label>
                                        <div class="controls">
                                            <input xs-input-sync type="text" ng-model="single_order.basicinfo.lastname" class="regular-input" />
                                        </div>
                                    </div>
                                    <div class="control-group">
                                        <label class="control-label">Company</label>
                                        <div class="controls">
                                            <input xs-input-sync type="text" ng-model="single_order.basicinfo.company" class="regular-input" />
                                        </div>
                                    </div>
                                    <div class="control-group">
                                        <label class="control-label">Address line 1</label>
                                        <div class="controls">
                                            <input xs-input-sync type="text" ng-model="single_order.basicinfo.address_1" class="regular-input" />
                                        </div>
                                    </div>
                                    <div class="control-group">
                                        <label class="control-label">Address line 2</label>
                                        <div class="controls">
                                            <input xs-input-sync type="text" ng-model="single_order.basicinfo.address_2" class="regular-input" />
                                        </div>
                                    </div>
                                    <div class="control-group">
                                        <label class="control-label">City</label>
                                        <div class="controls">
                                            <input xs-input-sync type="text" ng-model="single_order.basicinfo.city" class="regular-input" />
                                        </div>
                                    </div>
                                    <div class="control-group">
                                        <label class="control-label">State</label>
                                        <div class="controls">
                                            <input xs-input-sync type="text" ng-model="single_order.basicinfo.state" class="regular-input" />
                                        </div>
                                    </div>
                                    <div class="control-group">
                                        <label class="control-label">Zip</label>
                                        <div class="controls">
                                            <input xs-input-sync type="text" ng-model="single_order.basicinfo.postcode" class="regular-input" />
                                        </div>
                                    </div>
                                    <div class="control-group">
                                        <label class="control-label">Country</label>
                                        <div class="controls">
                                            <input xs-input-sync type="text" ng-model="single_order.basicinfo.country" class="regular-input" />
                                        </div>
                                    </div>
                                </div>
                                <div class="span6">
                                    <div class="control-group">
                                        <label class="control-label">Order #</label>
                                        <div class="controls">
                                            <input xs-input-sync type="text" ng-model="single_order.basicinfo.increment_id" class="regular-input" />
                                        </div>
                                    </div>
                                    <div class="control-group">
                                        <label class="control-label">Buyer Email</label>
                                        <div class="controls">
                                            <input xs-input-sync type="text" ng-model="single_order.basicinfo.email" class="regular-input" />
                                        </div>
                                    </div>
                                    <div class="control-group">
                                        <label class="control-label">Store Order id</label>
                                        <div class="controls">
                                            <input xs-input-sync type="text" ng-model="single_order.basicinfo.store_order_id" class="regular-input" />
                                        </div>
                                    </div>
                                    <div class="control-group">
                                        <label class="control-label">Order Date</label>
                                        <div class="controls">
                                            <input xs-input-sync type="text" ng-model="single_order.basicinfo.order_placed_time" class="regular-input" />
                                        </div>
                                    </div>
                                </div>
                            </div>
                            </fieldset>
                            <fieldset>
                                <legend>Shipping Information</legend>
                                <div class="row-fluid">
                                    <div class="span6">
                                        <div class="control-group">
                                            <label class="control-label">Scanned on</label>
                                            <div class="controls">
                                                <input xs-input-sync type="text" ng-model="single_order.basicinfo.scanned_on" class="regular-input" />
                                            </div>
                                        </div>

                                    </div>
                                    <div class="span6">

                                        <div class="control-group">
                                            <label class="control-label">Tracking id #</label>
                                            <div class="controls">
                                                <input xs-input-sync type="text" ng-model="single_order.basicinfo.tracking_num" class="regular-input" />
                                            </div>
                                        </div>

                                    </div>
                                </div>
                            </fieldset>
                        </div>


                        <div class="tab-pane" id="itemstab">
                            <div class="control-group pull-right" ng-show="single_order.remove_items_permitted">
                                <div class="controls">
                                    <button class="btn btn-danger" ng-click="item_remove_selected()">Remove selected Items</button>
                                </div>
                            </div>


                            <table class="table table-hover table-bordered" >
                                <thead>
                                <tr >
                                    <th><input ng-model="items_select" type="checkbox" ng-change='item_select_all_toggle()' /></th>
                                    <th>Product</th>
                                    <th>Primary Image</th>
                                    <th>Primary SKU</th>
                                    <th>Primary Warehouse</th>
                                    <th>Qty ordered</th>
                                    <th>On hand</th>
                                    <th>Is Skippable</th>
                                </tr>
                                </thead>
                                <tbody>
                                <tr ng-repeat="item in single_order.items">
                                    <td><input type="checkbox" ng-model="item.checked"/></td>
                                    <td>{{ item.productinfo.name }}</td>
                                    <td> <div class="single-image"><img class="img-thumb" ng-src="{{item.productimages[0].image}}" /></div></td>
                                    <td>{{item.sku}}</td>
                                    <td>{{item.location}}</td>
                                    <td ng-dblclick="edit_qty($index)">{{item.iteminfo.qty}}
                                        <div ng-show="item_edit.index==$index" class="tag-bubble tag-bubble-input span3 input-text">
                                            <input xs-input-sync class="span3" name="{{'item_qty_' +$index}}" type="number" min="0" ng-model="item_edit.qty" />
                                            <i class="icon-ok" ng-click="save_item()"></i>
                                        </div>
                                    </td>
                                    <td>{{item.qty_on_hand}}</td>
                                    <td><input type="checkbox" ng-model="item.productinfo.is_skippable"/></td>
                                </tr>
                                </tbody>
                            </table>
                            <div class="control-group pull-right"  ng-show="single_order.add_items_permitted">
                                <div class="controls">
                                    <button class="btn" ng-click="item_order()">Add Item</button>
                                </div>
                            </div>
                        </div>
                        <div class="tab-pane" id="notestab">
                            <fieldset>
                                <legend>Internal Notes</legend>
                                <textarea xs-input-sync ng-model="single_order.basicinfo.notes_internal" class="regular-input span8" rows="4"></textarea>
                            </fieldset>
                            <fieldset>
                                <legend>Notes to Packer</legend>
                                <textarea xs-input-sync ng-model="single_order.basicinfo.notes_toPacker" class="regular-input span8" rows="4"></textarea>
                            </fieldset>
                            <fieldset>
                                <legend>Notes from Packer</legend>
                                <textarea xs-input-sync ng-model="single_order.basicinfo.notes_fromPacker" class="regular-input span8" rows="4"></textarea>
                            </fieldset>
                            <fieldset>
                                <legend>Customer Comments</legend>
                                <textarea xs-input-sync ng-model="single_order.basicinfo.customer_comments" class="regular-input span8" rows="4"></textarea>
                            </fieldset>
                        </div>
                        <div class="tab-pane" id="actexceptab">

                                <div class="row-fluid">
                                    <div class="span6">
                                        <fieldset>
                                            <legend>Activity Log</legend>
                                            <div class="control-group" ng-repeat="activity in single_order.activities">
                                                <h5>{{ activity.activitytime | date:'EEEE MM/dd/yyyy hh:mm:ss a'}}</h5>
                                                <div class="controls">
                                                    {{ activity.action}} - by: {{ activity.username }}
                                                </div>
                                            </div>
                                        </fieldset>
                                    </div>
                                    <div class="span6">
                                        <fieldset>
                                            <legend>Packing Exceptions</legend>
                                            <div class="control-group">
                                                <label class="control-label">Reason</label>
                                                <div class="controls">
                                                    <label class="radio">
                                                        <input type="radio" ng-model="single_order.exception.reason" value="qty_related" /> Quantity Related
                                                    </label>
                                                    <label class="radio">
                                                        <input type="radio" ng-model="single_order.exception.reason" value="incorrect_item" /> Incorrect item
                                                    </label>
                                                    <label class="radio">
                                                        <input type="radio" ng-model="single_order.exception.reason" value="missing_item" /> Missing item
                                                    </label>
                                                    <label class="radio">
                                                        <input type="radio" ng-model="single_order.exception.reason" value="damaged_item" /> Damaged item
                                                    </label>
                                                    <label class="radio">
                                                        <input type="radio" ng-model="single_order.exception.reason" value="special_instruction" /> Special instruction related
                                                    </label>
                                                    <label class="radio">
                                                        <input type="radio" ng-model="single_order.exception.reason" value="other" /> Other
                                                    </label>
                                                </div>
                                            </div>
                                            <div class="control-group">
                                                <label class="control-label">Description (optional)</label>
                                                <div class="controls">
                                                    <textarea xs-input-sync ng-model="single_order.exception.description" class="span8" rows="4"></textarea>
                                                </div>
                                            </div>
                                            <div class="control-group">
                                                <label class="control-label">Associate exception with</label>
                                                <div class="controls">
                                                    <label class="radio">
                                                        <input type="radio"  ng-model="single_order.exception.assoc" value="current" /> Current user
                                                    </label>
                                                    <label class="radio">
                                                        <input type="radio"  ng-model="single_order.exception.assoc" value="none" /> No user
                                                    </label>
                                                </div>
                                            </div>
                                            <button class="btn btn-primary" ng-click="update_order_exception()">Record Exception</button>
                                            <button class="btn btn-danger" ng-click="clear_order_exception()">Clear Exception</button>
                                        </fieldset>
                                    </div>
                                </div>

                        </div>

                    </div>
                </div>

                <div class="modal-footer">
                    <div class="row-fluid">
                        <div class="span6">
                            <span class="label label-info" id="order_update_status" ng-show="order_update_status">{{order_update_message}}</span>
                        </div>
                        <div class="span6">
                            <div class="pull-right">
                                <button class="btn btn-primary" ng-click="update_single_order()">Save</button>
                                <button class="btn" data-dismiss="modal" aria-hidden="true">Close</button>
                            </div>
                        </div>
                    </div>
                </div>

            </fieldset>
            </div>
        </div>

<!-- Add item modal -->
        <div id="addItem" class="modal hide fade" tabindex="-1" role="dialog" aria-labelledby="addItem"
             aria-hidden="true">
            <div class="modal-header">
                <button type="button" class="close" data-dismiss="modal" aria-hidden="true"><i class="icon-remove"></i></button>
                <h3 id="addItemHeader" >Select Item to add to Order</h3>
            </div>
            <div class="modal-body" id="addItem-body">
                <input type="text" ng-model="product_setup.search" class="input-large search-query" placeholder="Search term" /> <button class="btn" ng-click="product_setup.search='';get_products()">Clear</button><br/><br/>
                <table id="itemstbl" class="table table-hover table-bordered">
                    <thead>
                    <tr>
                        <th class="item_setup-sort item_setup-sort-name">
                            <a href="" ng-click="item_setup_opt('sort','name')">Item Name<span class="{{'caret-'+product_setup.order}}"></span></a>
                        </th>
                        <th class="item_setup-sort item_setup-sort-sku">
                            <a href="" ng-click="item_setup_opt('sort','sku')">Primary Sku<span class="{{'caret-'+product_setup.order}}"></span></a>
                        </th>
                        <th class="item_setup-sort item_setup-sort-status">
                            <a href="" ng-click="item_setup_opt('sort','status')">Status<span class="{{'caret-'+product_setup.order}}"></span></a>
                        </th>
                        <th class="item_setup-sort item_setup-sort-barcode">
                            <a href="" ng-click="item_setup_opt('sort','barcode')">Barcode<span class="{{'caret-'+product_setup.order}}"></span></a>
                        </th>
                    </tr>
                    </thead>
                    <tbody>
                    <tr ng-click="add_item_order(product.id)" ng-repeat="product in products">
                        <td>{{product.name}}</td>
                        <td>{{product.sku}}</td>
                        <td>{{product.status}}</td>
                        <td>{{product.barcode}}</td>
                    </tr>
                    </tbody>
                </table>
                <button ng-show="new_products" class="btn btn-info btn-large" style="width:100%;" ng-click="product_next()">Load More</button>
            </div>
            <div class="modal-footer">
                <button class="btn" data-dismiss="modal" aria-hidden="true">Cancel</button>
            </div>
        </div>



    </div>
</div>
